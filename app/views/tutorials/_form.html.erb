<%
  tutorial_data = {
    id: @tutorial.id,
    title: @tutorial.title,
    description: @tutorial.description,
    youtube_id: @tutorial.youtube_id,
    body_components: @tutorial.body_components,
    member_id: @tutorial.member_id,
    attachment_url: @tutorial.attachment_url,
    slug: @tutorial.slug,
    published: @tutorial.published
  }
%>
<div id="tutorial-form-container" class="container">

    <div class="row">
      <div class="span8">
        <%= label :tutorial, :youtube_id, :class => "flex-video widescreen youtube-placeholder" do %>
          <%= text_field :tutorial, :youtube_id, :placeholder => "Paste YouTube video url", :class => "span5" %>
        <% end %>
      </div>
      <div class="span4 tutorial-sidebar">
        <h3><%= text_field :tutorial, :title, :placeholder => "Tutorial Title", :class => "span4" %></h3>
        <h4>by <%= @tutorial.member.name %></h4>
        <p><%= text_field :tutorial, :description, :placeholder => "One-line description", :class => "span4" %></p>
        
        <div class="btn-group-container" id="tutorial-attachment-container">
          <%= image_tag "loader.gif" %>
        </div>
      </div>
    </div>  

  <div class="editor well"><%= image_tag "loader.gif" %></div>

  <div clas="btn-group-container">
    <button class="btn btn-primary" data-trigger="add-more">Add More</button>
  </div>

  <div class="btn-group-container">
    <div class="btn-group"><%= button_tag "Save Changes", :class => "btn btn-primary", :"data-trigger" => "save-tutorial" %></div>
    <div class="btn-group"><%= button_tag "Preview Changes", :class => "btn btn-info", :"data-trigger" => "preview-tutorial", :style => (@tutorial.new_record? ? "display:none;" : "") %></div>
    <div class="btn-group"><%= button_tag "View Tutorial", :class => "btn btn-info", :"data-trigger" => "view-tutorial", :style => (@tutorial.new_record? ? "display:none;" : "") %></div>
    <div class="btn-group"><%= button_tag "Publish", :class => "btn btn-info", :"data-trigger" => "publish-tutorial", :style => (@tutorial.new_record? || @tutorial.published? ? "display:none;" : "") %></div>
  </div>
</div>

<%= render 's3_uploader_form_jst' %>
<script type="text/javascript">
Sensori.Tutorial = new Sensori.Models.Tutorial(<%= raw tutorial_data.to_json %>);
Sensori.TutorialView = new Sensori.Views.Tutorial({
  model: Sensori.Tutorial,
  el: $("#tutorial-form-container")
}).render();
</script>